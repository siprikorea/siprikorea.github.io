{"version":3,"sources":["view/view_date.jsx","controller/control_chant.js","view/view_iframe.jsx","view/view_chant.jsx","index.js"],"names":["ViewDate","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","handleDateChange","bind","assertThisInitialized","handlePrevClick","handleTodayClick","handleNextClick","state","date","Date","setState","onChange","_this2","DateFnsUtils","addDays","_this3","react_default","a","createElement","onClick","material_ui_pickers_esm","utils","format","margin","label","value","Component","audio","Audio","ControlChant","URL_SHEET","URL_MP3","dateString","localStorage","getItem","parse","setItem","chantDate","ModelChant","chants","number","padStart","url","src","play","ViewChant","controlChant","handleShowSheet","handleChantChange","handleChantPlay","handleChantStop","showSheet","$","css","window","height","e","JSON","concat","name","target","stop","_this$props","type","App","getDate","getChants","setDate","chant","_","merge","setChants","_this$state","view_date","view_chant","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.e93b442d.chunk.js","sourcesContent":["import 'date-fns';\r\nimport React, { Component } from 'react';\r\nimport DateFnsUtils from '@date-io/date-fns';\r\nimport { MuiPickersUtilsProvider, DatePicker } from 'material-ui-pickers';\r\n\r\nclass ViewDate extends Component {\r\n    /**\r\n     * Constructor\r\n     * @param {object} props properties\r\n     */\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.handleDateChange = this.handleDateChange.bind(this);\r\n        this.handlePrevClick = this.handlePrevClick.bind(this);\r\n        this.handleTodayClick = this.handleTodayClick.bind(this);\r\n        this.handleNextClick = this.handleNextClick.bind(this);\r\n        this.state = { date: props.date ? props.date : new Date() };\r\n    }\r\n\r\n    /**\r\n     * Date change handler\r\n     * @param {Date} date date\r\n     */\r\n    handleDateChange(date) {\r\n        this.setState({ date: date });\r\n        this.props.onChange(date);\r\n    }\r\n\r\n    /**\r\n     * Previous day click handler\r\n     */\r\n    handlePrevClick() {\r\n        this.setState((state) => {\r\n            let date = new DateFnsUtils().addDays(state.date, -1);\r\n            this.props.onChange(date);\r\n            return { date: date };\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Today click handler\r\n     */\r\n    handleTodayClick() {\r\n        this.setState({ date: new Date() })\r\n        this.props.onChange(this.state.date);\r\n    }\r\n\r\n    /**\r\n     * Next day click handler\r\n     */\r\n    handleNextClick() {\r\n        this.setState((state) => {\r\n            let date = new DateFnsUtils().addDays(state.date, 1);\r\n            this.props.onChange(date);\r\n            return { date: date };\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Render\r\n     */\r\n    render() {\r\n                //<button onClick={this.handleTodayClick}>오늘</button>\r\n        return (\r\n            <div>\r\n                <button onClick={this.handlePrevClick}>전날</button>\r\n                <MuiPickersUtilsProvider utils={DateFnsUtils}>\r\n                    <DatePicker\r\n                        format='yyyy년 M월 d일'\r\n                        margin=\"normal\"\r\n                        label='날짜를 선택하세요'\r\n                        value={this.state.date}\r\n                        onChange={this.handleDateChange}\r\n                    />\r\n                </MuiPickersUtilsProvider>\r\n                <button onClick={this.handleNextClick}>다음날</button>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default ViewDate;","import ModelChant from '../model/model_chant.json';\r\nimport { format, parse } from 'date-fns';\r\n\r\nconst audio = new Audio();\r\n\r\nclass ControlChant {\r\n    constructor() {\r\n        this.audio = audio;\r\n        this.URL_SHEET = 'http://maria.catholic.or.kr/sungga/viewImage.asp?ctxtId=2012040';\r\n        this.URL_MP3 = 'http://maria.catholic.or.kr/musicfiles/mp3/2004090';\r\n    }\r\n\r\n    getDate() {\r\n        // Read missa date from local storage\r\n        let dateString = localStorage.getItem(\"MISSA_DATE\");\r\n        // Paser date string to date\r\n        return dateString ? parse(dateString, 'yyyy-MM-dd', new Date()) : new Date();\r\n    }\r\n\r\n    setDate(date) {\r\n        // Set missa date to local storage\r\n        localStorage.setItem(\"MISSA_DATE\", format(date, 'yyyy-MM-dd'));\r\n    }\r\n\r\n    getChants(date) {\r\n        let chantDate = format(date, 'yyyy-MM-dd');\r\n        return ModelChant[chantDate];\r\n    }\r\n\r\n    setChants(date, chants) {\r\n    }\r\n\r\n    getSheetSrc(number) {\r\n        const url = this.URL_SHEET + number.padStart(3, '0');\r\n        return url;\r\n    }\r\n\r\n    play(number) {\r\n        const url = this.URL_MP3 + number.padStart(3, '0') + '.mp3';\r\n        this.audio.src = url;\r\n        this.audio.play();\r\n    }\r\n\r\n    stop() {\r\n        this.audio.src = '';\r\n    }\r\n}\r\n\r\nexport default ControlChant;","import React, { Component } from 'react';\r\n\r\nclass ViewIFrame extends Component {\r\n  render() {\r\n    const { src, show } = this.props;\r\n    return <iframe id='sheet' title='sheet' src={src} style={{ border: 0, width: '100%', height: '1000px', display: show ? 'block' : 'none' }} />\r\n  }\r\n}\r\n\r\nexport default ViewIFrame;","import React, { Component } from 'react';\r\nimport ControlChant from '../controller/control_chant';\r\nimport ViewIFrame from './view_iframe.jsx';\r\nimport $ from 'jquery';\r\n\r\nclass ViewChant extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.controlChant = new ControlChant();\r\n    this.handleShowSheet = this.handleShowSheet.bind(this);\r\n    this.handleChantChange = this.handleChantChange.bind(this);\r\n    this.handleChantPlay = this.handleChantPlay.bind(this);\r\n    this.handleChantStop = this.handleChantStop.bind(this);\r\n    this.state = { showSheet: false };\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    $('#sheet').css('height', $(window).height() + 'px');\r\n  }\r\n\r\n  handleShowSheet(e) {\r\n    this.setState((state) => ({ showSheet: !state.showSheet }));\r\n  }\r\n\r\n  handleChantChange(e) {\r\n    this.props.onChange(JSON.parse(`{\"${this.props.name}\" : \"${e.target.value}\" }`));\r\n  }\r\n\r\n  handleChantPlay() {\r\n    this.controlChant.play(this.props.number);\r\n  }\r\n\r\n  handleChantStop() {\r\n    this.controlChant.stop();\r\n  }\r\n\r\n  render() {\r\n    const { name, number } = this.props;\r\n        //<button onClick={this.handleShowSheet}>악보</button>\r\n        //<ViewIFrame src={this.controlChant.getSheetSrc(number)} show={this.state.showSheet} />\r\n    return (\r\n      <div>\r\n        <span>{name}</span>\r\n        <input type=\"text\" value={number} onChange={this.handleChantChange} />\r\n        <button onClick={this.handleChantPlay}>재생</button>\r\n        <button onClick={this.handleChantStop}>정지</button>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ViewChant;","import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport ViewDate from './view/view_date.jsx';\nimport ViewChant from './view/view_chant.jsx';\nimport ControlChant from './controller/control_chant';\nimport _ from 'lodash';\n\nclass App extends Component {\n    /**\n     * Constructor\n     * @param {object} props properties\n     */\n    constructor(props) {\n        super(props);\n\n        this.controlChant = new ControlChant();\n\n        // Set date to state\n        let date = this.controlChant.getDate();\n        let chants = this.controlChant.getChants(date);\n        this.state = { date: date, chants: chants };\n\n        // Bind this to handler\n        this.handleDateChange = this.handleDateChange.bind(this);\n        this.handleChantChange = this.handleChantChange.bind(this);\n    }\n\n    /**\n     * Date change handler\n     * @param {Date} date Date\n     */\n    handleDateChange(date) {\n        // Set changed date\n        this.setState({ date: date });\n        // Set changed date\n        this.controlChant.setDate(date);\n        // Get changed chants\n        let chants = this.controlChant.getChants(date);\n        // Set changed chants\n        this.setState({ chants: chants });\n    }\n\n    /**\n     * Change change handler\n     * @param {object} chants Chants\n     */\n    handleChantChange(chant) {\n        this.setState((chants) => {\n            // Merge changed chant\n            chants = _.merge(chants, chant);\n            // Set changed chants\n            this.controlChant.setChants(this.state.date, chants);\n            return { chants: chants };\n        });\n    }\n\n    /**\n     * render\n     */\n    render() {\n        const { date, chants } = this.state;\n        return (\n            <div>\n                <ViewDate date={date} onChange={this.handleDateChange} />\n                <ViewChant name='입당성가' number={chants ? chants['입당'] : ''} onChange={this.handleChantChange} />\n                <ViewChant name='봉헌성가' number={chants ? chants['봉헌'] : ''} onChange={this.handleChantChange} />\n                <ViewChant name='성체성가' number={chants ? chants['성체'] : ''} onChange={this.handleChantChange} />\n                <ViewChant name='파견성가' number={chants ? chants['파견'] : ''} onChange={this.handleChantChange} />\n            </div>\n        );\n    }\n}\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}