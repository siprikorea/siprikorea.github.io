{"version":3,"sources":["view/view_date.jsx","controller/control_chant.js","view/view_sheet.jsx","view/view_chant.jsx","index.js"],"names":["ViewDate","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","handleDateChange","bind","assertThisInitialized","handlePrevClick","handleTodayClick","handleNextClick","state","date","Date","setState","onChange","_this2","DateFnsUtils","addDays","_this3","classes","react_default","a","createElement","Grid","container","direction","justify","alignItems","className","Button","variant","color","button","onClick","material_ui_pickers_esm","utils","format","margin","label","value","Component","withStyles","theme","spacing","unit","audio","Audio","ControlChant","URL_SHEET","URL_MP3","dateString","localStorage","getItem","parse","setItem","chantDate","ModelChant","chants","number","padStart","url","src","play","ViewSheet","_this$props","alt","show","style","width","height","display","ViewChant","controlChant","handleShowSheet","handleChantChange","handleChantPlay","handleChantStop","showSheet","$","css","window","e","JSON","concat","name","target","stop","noValidate","autoComplete","TextField","textFiled","view_sheet","getSheetSrc","textField","App","getDate","getChants","setDate","chant","_","merge","setChants","_this$state","view_date","view_chant","ReactDOM","render","src_App","document","getElementById"],"mappings":"6qBAgBMA,cAKF,SAAAA,EAAYC,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAL,IACfE,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAH,GAAAQ,KAAAH,KAAMJ,KAEDQ,iBAAmBP,EAAKO,iBAAiBC,KAAtBP,OAAAQ,EAAA,EAAAR,CAAAD,IACxBA,EAAKU,gBAAkBV,EAAKU,gBAAgBF,KAArBP,OAAAQ,EAAA,EAAAR,CAAAD,IACvBA,EAAKW,iBAAmBX,EAAKW,iBAAiBH,KAAtBP,OAAAQ,EAAA,EAAAR,CAAAD,IACxBA,EAAKY,gBAAkBZ,EAAKY,gBAAgBJ,KAArBP,OAAAQ,EAAA,EAAAR,CAAAD,IACvBA,EAAKa,MAAQ,CAAEC,KAAMf,EAAMe,KAAOf,EAAMe,KAAO,IAAIC,MAPpCf,gFAcFc,GACbX,KAAKa,SAAS,CAAEF,KAAMA,IACtBX,KAAKJ,MAAMkB,SAASH,6CAMN,IAAAI,EAAAf,KACdA,KAAKa,SAAS,SAACH,GACX,IAAIC,GAAO,IAAIK,KAAeC,QAAQP,EAAMC,MAAO,GAEnD,OADAI,EAAKnB,MAAMkB,SAASH,GACb,CAAEA,KAAMA,gDAQnBX,KAAKa,SAAS,CAAEF,KAAM,IAAIC,OAC1BZ,KAAKJ,MAAMkB,SAASd,KAAKU,MAAMC,gDAMjB,IAAAO,EAAAlB,KACdA,KAAKa,SAAS,SAACH,GACX,IAAIC,GAAO,IAAIK,KAAeC,QAAQP,EAAMC,KAAM,GAElD,OADAO,EAAKtB,MAAMkB,SAASH,GACb,CAAEA,KAAMA,sCAOd,IAEGQ,EAAYnB,KAAKJ,MAAjBuB,QACR,OACIC,EAAAC,EAAAC,cAACC,EAAA,EAAD,CAAMC,WAAS,EAACC,UAAU,MAAMC,QAAQ,SAASC,WAAW,WAAWC,UAAWT,EAAQK,WACtFJ,EAAAC,EAAAC,cAACO,EAAA,EAAD,CAAQC,QAAQ,YAAYC,MAAM,UAAUH,UAAWT,EAAQa,OAAQC,QAASjC,KAAKO,iBAArF,gBACAa,EAAAC,EAAAC,cAACY,EAAA,EAAD,CAAyBC,MAAOnB,KAC5BI,EAAAC,EAAAC,cAACY,EAAA,EAAD,CACIE,OAAO,6BACPC,OAAO,SACPC,MAAM,oDACNC,MAAOvC,KAAKU,MAAMC,KAClBG,SAAUd,KAAKI,oBAGvBgB,EAAAC,EAAAC,cAACO,EAAA,EAAD,CAAQC,QAAQ,YAAYC,MAAM,YAAYH,UAAWT,EAAQa,OAAQC,QAASjC,KAAKQ,kBAAvF,gBACAY,EAAAC,EAAAC,cAACO,EAAA,EAAD,CAAQC,QAAQ,YAAYC,MAAM,YAAYH,UAAWT,EAAQa,OAAQC,QAASjC,KAAKS,iBAAvF,8BAzEO+B,aA+ERC,cAvFA,SAAAC,GAAK,MAAK,CACrBV,OAAQ,CACJK,OAAQK,EAAMC,QAAQC,MAE1BpB,UAAW,KAmFAiB,CAAmB9C,sCC5F5BkD,EAAQ,IAAIC,MAmDHC,aAhDX,SAAAA,IAAejD,OAAAC,EAAA,EAAAD,CAAAE,KAAA+C,GACX/C,KAAK6C,MAAQA,EACb7C,KAAKgD,UAAY,gEACjBhD,KAAKiD,QAAU,2GAKf,IAAIC,EAAaC,aAAaC,QAAQ,cAEtC,OAAOF,EAAaG,YAAMH,EAAY,aAAc,IAAItC,MAAU,IAAIA,qCAGlED,GAEJwC,aAAaG,QAAQ,aAAclB,YAAOzB,EAAM,iDAG1CA,GACN,IAAI4C,EAAYnB,YAAOzB,EAAM,cAC7B,OAAO6C,EAAWD,qCAGZ5C,EAAM8C,wCAGJC,GACR,OAAKA,EAGO1D,KAAKgD,UAAYU,EAAOC,SAAS,EAAG,KAAO,OAF5C,gCAMVD,GACD,GAAKA,EAAL,CAGA,IAAME,EAAM5D,KAAKiD,QAAUS,EAAOC,SAAS,EAAG,KAAO,OACrD3D,KAAK6C,MAAMgB,IAAMD,EACjB5D,KAAK6C,MAAMiB,uCAIX9D,KAAK6C,MAAMgB,IAAM,YCzCVE,mLANJ,IAAAC,EACoBhE,KAAKJ,MAAxBiE,EADDG,EACCH,IAAKI,EADND,EACMC,IAAKC,EADXF,EACWE,KAClB,OAAO9C,EAAAC,EAAAC,cAAA,OAAKuC,IAAKA,EAAKI,IAAKA,EAAKE,MAAO,CAAEC,MAAO,QAASC,OAAQ,OAAQC,QAASJ,EAAO,QAAU,iBAH/E1B,8BCkBlB+B,cACJ,SAAAA,EAAY3E,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAuE,IACjB1E,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAyE,GAAApE,KAAAH,KAAMJ,KAED4E,aAAe,IAAIzB,EACxBlD,EAAK4E,gBAAkB5E,EAAK4E,gBAAgBpE,KAArBP,OAAAQ,EAAA,EAAAR,CAAAD,IACvBA,EAAK6E,kBAAoB7E,EAAK6E,kBAAkBrE,KAAvBP,OAAAQ,EAAA,EAAAR,CAAAD,IACzBA,EAAK8E,gBAAkB9E,EAAK8E,gBAAgBtE,KAArBP,OAAAQ,EAAA,EAAAR,CAAAD,IACvBA,EAAK+E,gBAAkB/E,EAAK+E,gBAAgBvE,KAArBP,OAAAQ,EAAA,EAAAR,CAAAD,IACvBA,EAAKa,MAAQ,CAAEmE,WAAW,GARThF,oFAYjBiF,IAAE,UAAUC,IAAI,SAAUD,IAAEE,QAAQX,SAAW,8CAGjCY,GACdjF,KAAKa,SAAS,SAACH,GAAD,MAAY,CAAEmE,WAAYnE,EAAMmE,uDAG9BI,GAChBjF,KAAKJ,MAAMkB,SAASoE,KAAK7B,MAAL,KAAA8B,OAAgBnF,KAAKJ,MAAMwF,KAA3B,SAAAD,OAAuCF,EAAEI,OAAO9C,MAAhD,mDAIpBvC,KAAKwE,aAAaV,KAAK9D,KAAKJ,MAAM8D,kDAIlC1D,KAAKwE,aAAac,wCAGX,IAAAtB,EAC2BhE,KAAKJ,MAA/BuB,EADD6C,EACC7C,QAASiE,EADVpB,EACUoB,KAAM1B,EADhBM,EACgBN,OACvB,OACEtC,EAAAC,EAAAC,cAACC,EAAA,EAAD,CAAMC,WAAS,EAACE,QAAQ,SAASC,WAAW,WAAWC,UAAWT,EAAQK,WACxEJ,EAAAC,EAAAC,cAAA,QAAMiE,YAAU,EAACC,aAAa,OAC5BpE,EAAAC,EAAAC,cAACO,EAAA,EAAD,CAAQC,QAAQ,WAAWF,UAAWT,EAAQa,QAASoD,GACvDhE,EAAAC,EAAAC,cAACmE,EAAA,EAAD,CAAWpD,OAAO,SAAST,UAAWT,EAAQuE,UAAWnD,MAAOmB,EAAQ5C,SAAUd,KAAK0E,oBACvFtD,EAAAC,EAAAC,cAACO,EAAA,EAAD,CAAQC,QAAQ,WAAWC,MAAM,UAAUH,UAAWT,EAAQa,OAAQC,QAASjC,KAAKyE,iBAApF,gBACArD,EAAAC,EAAAC,cAACO,EAAA,EAAD,CAAQC,QAAQ,WAAWC,MAAM,UAAUH,UAAWT,EAAQa,OAAQC,QAASjC,KAAK2E,iBAApF,gBACAvD,EAAAC,EAAAC,cAACO,EAAA,EAAD,CAAQC,QAAQ,WAAWC,MAAM,YAAYH,UAAWT,EAAQa,OAAQC,QAASjC,KAAK4E,iBAAtF,gBACAxD,EAAAC,EAAAC,cAACqE,EAAD,CAAW9B,IAAK7D,KAAKwE,aAAaoB,YAAYlC,GAASO,IAAKP,EAAQQ,KAAMlE,KAAKU,MAAMmE,qBA1CvErC,aAiDTC,cA5DA,SAAAC,GAAK,MAAK,CACvBV,OAAQ,CACNK,OAAQK,EAAMC,QAAQC,MAExBpB,UAAW,GAEXqE,UAAW,CACTxD,OAAQK,EAAMC,QAAQC,QAqDXH,CAAmB8B,qBC9D5BuB,cAKF,SAAAA,EAAYlG,GAAO,IAAAC,EAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAA8F,IACfjG,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAgG,GAAA3F,KAAAH,KAAMJ,KAED4E,aAAe,IAAIzB,EAGxB,IAAIpC,EAAOd,EAAK2E,aAAauB,UACzBtC,EAAS5D,EAAK2E,aAAawB,UAAUrF,GAP1B,OAQfd,EAAKa,MAAQ,CAAEC,KAAMA,EAAM8C,OAAQA,GAGnC5D,EAAKO,iBAAmBP,EAAKO,iBAAiBC,KAAtBP,OAAAQ,EAAA,EAAAR,CAAAD,IACxBA,EAAK6E,kBAAoB7E,EAAK6E,kBAAkBrE,KAAvBP,OAAAQ,EAAA,EAAAR,CAAAD,IAZVA,gFAmBFc,GAEbX,KAAKa,SAAS,CAAEF,KAAMA,IAEtBX,KAAKwE,aAAayB,QAAQtF,GAE1B,IAAI8C,EAASzD,KAAKwE,aAAawB,UAAUrF,GAEzCX,KAAKa,SAAS,CAAE4C,OAAQA,8CAOVyC,GAAO,IAAAnF,EAAAf,KACrBA,KAAKa,SAAS,SAAC4C,GAKX,OAHAA,EAAS0C,IAAEC,MAAM3C,EAAQyC,GAEzBnF,EAAKyD,aAAa6B,UAAUtF,EAAKL,MAAMC,KAAM8C,GACtC,CAAEA,OAAQA,sCAOhB,IAAA6C,EACoBtG,KAAKU,MAAtBC,EADH2F,EACG3F,KAAM8C,EADT6C,EACS7C,OACd,OACIrC,EAAAC,EAAAC,cAAA,WACIF,EAAAC,EAAAC,cAACiF,EAAD,CAAU5F,KAAMA,EAAMG,SAAUd,KAAKI,mBACrCgB,EAAAC,EAAAC,cAACkF,EAAD,CAAWpB,KAAK,eAAK1B,OAAQD,EAASA,EAAO,gBAAQ,GAAI3C,SAAUd,KAAK0E,oBACxEtD,EAAAC,EAAAC,cAACkF,EAAD,CAAWpB,KAAK,eAAK1B,OAAQD,EAASA,EAAO,gBAAQ,GAAI3C,SAAUd,KAAK0E,oBACxEtD,EAAAC,EAAAC,cAACkF,EAAD,CAAWpB,KAAK,eAAK1B,OAAQD,EAASA,EAAO,gBAAQ,GAAI3C,SAAUd,KAAK0E,oBACxEtD,EAAAC,EAAAC,cAACkF,EAAD,CAAWpB,KAAK,eAAK1B,OAAQD,EAASA,EAAO,gBAAQ,GAAI3C,SAAUd,KAAK0E,4BA5DtElC,aAkElBiE,IAASC,OAAOtF,EAAAC,EAAAC,cAACqF,EAAD,MAASC,SAASC,eAAe","file":"static/js/main.ccd54563.chunk.js","sourcesContent":["import 'date-fns';\r\nimport React, { Component } from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport DateFnsUtils from '@date-io/date-fns';\r\nimport { MuiPickersUtilsProvider, DatePicker } from 'material-ui-pickers';\r\n\r\nconst styles = theme => ({\r\n    button: {\r\n        margin: theme.spacing.unit\r\n    },\r\n    container: {\r\n    }\r\n});\r\n\r\nclass ViewDate extends Component {\r\n    /**\r\n     * Constructor\r\n     * @param {object} props properties\r\n     */\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.handleDateChange = this.handleDateChange.bind(this);\r\n        this.handlePrevClick = this.handlePrevClick.bind(this);\r\n        this.handleTodayClick = this.handleTodayClick.bind(this);\r\n        this.handleNextClick = this.handleNextClick.bind(this);\r\n        this.state = { date: props.date ? props.date : new Date() };\r\n    }\r\n\r\n    /**\r\n     * Date change handler\r\n     * @param {Date} date date\r\n     */\r\n    handleDateChange(date) {\r\n        this.setState({ date: date });\r\n        this.props.onChange(date);\r\n    }\r\n\r\n    /**\r\n     * Previous day click handler\r\n     */\r\n    handlePrevClick() {\r\n        this.setState((state) => {\r\n            let date = new DateFnsUtils().addDays(state.date, -1);\r\n            this.props.onChange(date);\r\n            return { date: date };\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Today click handler\r\n     */\r\n    handleTodayClick() {\r\n        this.setState({ date: new Date() })\r\n        this.props.onChange(this.state.date);\r\n    }\r\n\r\n    /**\r\n     * Next day click handler\r\n     */\r\n    handleNextClick() {\r\n        this.setState((state) => {\r\n            let date = new DateFnsUtils().addDays(state.date, 1);\r\n            this.props.onChange(date);\r\n            return { date: date };\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Render\r\n     */\r\n    render() {\r\n        //<button onClick={this.handleTodayClick}>오늘</button>\r\n        const { classes } = this.props;\r\n        return (\r\n            <Grid container direction='row' justify='center' alignItems='flex-end' className={classes.container} >\r\n                <Button variant='contained' color='primary' className={classes.button} onClick={this.handlePrevClick}>전날</Button>\r\n                <MuiPickersUtilsProvider utils={DateFnsUtils}>\r\n                    <DatePicker\r\n                        format='yyyy년 M월 d일'\r\n                        margin=\"normal\"\r\n                        label='날짜를 선택하세요'\r\n                        value={this.state.date}\r\n                        onChange={this.handleDateChange}\r\n                    />\r\n                </MuiPickersUtilsProvider>\r\n                <Button variant='contained' color='secondary' className={classes.button} onClick={this.handleTodayClick}>오늘</Button>\r\n                <Button variant='contained' color='secondary' className={classes.button} onClick={this.handleNextClick}>다음날</Button>\r\n            </Grid>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withStyles(styles)(ViewDate);","import ModelChant from '../model/model_chant.json';\r\nimport { format, parse } from 'date-fns';\r\n\r\nconst audio = new Audio();\r\n\r\nclass ControlChant {\r\n    constructor() {\r\n        this.audio = audio;\r\n        this.URL_SHEET = 'http://maria.catholic.or.kr/files/mp3/sungga/img/2012/2012040';\r\n        this.URL_MP3 = 'http://maria.catholic.or.kr/musicfiles/mp3/2004090';\r\n    }\r\n\r\n    getDate() {\r\n        // Read missa date from local storage\r\n        let dateString = localStorage.getItem(\"MISSA_DATE\");\r\n        // Paser date string to date\r\n        return dateString ? parse(dateString, 'yyyy-MM-dd', new Date()) : new Date();\r\n    }\r\n\r\n    setDate(date) {\r\n        // Set missa date to local storage\r\n        localStorage.setItem(\"MISSA_DATE\", format(date, 'yyyy-MM-dd'));\r\n    }\r\n\r\n    getChants(date) {\r\n        let chantDate = format(date, 'yyyy-MM-dd');\r\n        return ModelChant[chantDate];\r\n    }\r\n\r\n    setChants(date, chants) {\r\n    }\r\n\r\n    getSheetSrc(number) {\r\n        if (!number) {\r\n            return '';\r\n        }\r\n        const url = this.URL_SHEET + number.padStart(3, '0') + '.jpg';\r\n        return url;\r\n    }\r\n\r\n    play(number) {\r\n        if (!number) {\r\n            return;\r\n        }\r\n        const url = this.URL_MP3 + number.padStart(3, '0') + '.mp3';\r\n        this.audio.src = url;\r\n        this.audio.play();\r\n    }\r\n\r\n    stop() {\r\n        this.audio.src = '';\r\n    }\r\n}\r\n\r\nexport default ControlChant;","import React, { Component } from 'react';\r\n\r\nclass ViewSheet extends Component {\r\n  render() {\r\n    const { src, alt, show } = this.props;\r\n    return <img src={src} alt={alt} style={{ width: '500px', height: '100%', display: show ? 'block' : 'none' }} />\r\n  }\r\n}\r\n\r\nexport default ViewSheet;","import React, { Component } from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport ControlChant from '../controller/control_chant';\r\nimport ViewSheet from './view_sheet.jsx';\r\nimport $ from 'jquery';\r\n\r\nconst styles = theme => ({\r\n  button: {\r\n    margin: theme.spacing.unit,\r\n  },\r\n  container: {\r\n  },\r\n  textField: {\r\n    margin: theme.spacing.unit,\r\n  }\r\n});\r\n\r\nclass ViewChant extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.controlChant = new ControlChant();\r\n    this.handleShowSheet = this.handleShowSheet.bind(this);\r\n    this.handleChantChange = this.handleChantChange.bind(this);\r\n    this.handleChantPlay = this.handleChantPlay.bind(this);\r\n    this.handleChantStop = this.handleChantStop.bind(this);\r\n    this.state = { showSheet: false };\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    $('#sheet').css('height', $(window).height() + 'px');\r\n  }\r\n\r\n  handleShowSheet(e) {\r\n    this.setState((state) => ({ showSheet: !state.showSheet }));\r\n  }\r\n\r\n  handleChantChange(e) {\r\n    this.props.onChange(JSON.parse(`{\"${this.props.name}\" : \"${e.target.value}\" }`));\r\n  }\r\n\r\n  handleChantPlay() {\r\n    this.controlChant.play(this.props.number);\r\n  }\r\n\r\n  handleChantStop() {\r\n    this.controlChant.stop();\r\n  }\r\n\r\n  render() {\r\n    const { classes, name, number } = this.props;\r\n    return (\r\n      <Grid container justify='center' alignItems='flex-end' className={classes.container} >\r\n        <form noValidate autoComplete=\"off\">\r\n          <Button variant='outlined' className={classes.button}>{name}</Button>\r\n          <TextField margin='normal' className={classes.textFiled} value={number} onChange={this.handleChantChange} />\r\n          <Button variant='outlined' color='primary' className={classes.button} onClick={this.handleShowSheet}>악보</Button>\r\n          <Button variant='outlined' color='primary' className={classes.button} onClick={this.handleChantPlay}>재생</Button>\r\n          <Button variant='outlined' color='secondary' className={classes.button} onClick={this.handleChantStop}>정지</Button>\r\n          <ViewSheet src={this.controlChant.getSheetSrc(number)} alt={number} show={this.state.showSheet} />\r\n        </form>\r\n      </Grid>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStyles(styles)(ViewChant);","import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport ViewDate from './view/view_date.jsx';\nimport ViewChant from './view/view_chant.jsx';\nimport ControlChant from './controller/control_chant';\nimport _ from 'lodash';\n\nclass App extends Component {\n    /**\n     * Constructor\n     * @param {object} props properties\n     */\n    constructor(props) {\n        super(props);\n\n        this.controlChant = new ControlChant();\n\n        // Set date to state\n        let date = this.controlChant.getDate();\n        let chants = this.controlChant.getChants(date);\n        this.state = { date: date, chants: chants };\n\n        // Bind this to handler\n        this.handleDateChange = this.handleDateChange.bind(this);\n        this.handleChantChange = this.handleChantChange.bind(this);\n    }\n\n    /**\n     * Date change handler\n     * @param {Date} date Date\n     */\n    handleDateChange(date) {\n        // Set changed date\n        this.setState({ date: date });\n        // Set changed date\n        this.controlChant.setDate(date);\n        // Get changed chants\n        let chants = this.controlChant.getChants(date);\n        // Set changed chants\n        this.setState({ chants: chants });\n    }\n\n    /**\n     * Change change handler\n     * @param {object} chants Chants\n     */\n    handleChantChange(chant) {\n        this.setState((chants) => {\n            // Merge changed chant\n            chants = _.merge(chants, chant);\n            // Set changed chants\n            this.controlChant.setChants(this.state.date, chants);\n            return { chants: chants };\n        });\n    }\n\n    /**\n     * render\n     */\n    render() {\n        const { date, chants } = this.state;\n        return (\n            <div>\n                <ViewDate date={date} onChange={this.handleDateChange} />\n                <ViewChant name='입당' number={chants ? chants['입당'] : ''} onChange={this.handleChantChange} />\n                <ViewChant name='봉헌' number={chants ? chants['봉헌'] : ''} onChange={this.handleChantChange} />\n                <ViewChant name='성체' number={chants ? chants['성체'] : ''} onChange={this.handleChantChange} />\n                <ViewChant name='파견' number={chants ? chants['파견'] : ''} onChange={this.handleChantChange} />\n            </div>\n        );\n    }\n}\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}